<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×”×“×’××ª ××¢×¨×›×ª ××•×“×¨×¦×™×” ×¢×‘×¨×™×ª</title>
    <style>
        body { 
            font-family: 'Segoe UI', 'Arial Hebrew', Arial, sans-serif; 
            margin: 20px; 
            direction: rtl;
            text-align: right;
            background-color: #f8f9fa;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .demo-section { 
            margin: 30px 0; 
            padding: 20px; 
            border: 2px solid #007cba; 
            border-radius: 8px;
            background-color: #f0f8ff;
        }
        .demo-input { 
            width: 100%; 
            padding: 15px; 
            margin: 15px 0;
            border-radius: 6px;
            border: 2px solid #ddd;
            font-size: 18px;
            box-sizing: border-box;
        }
        .demo-button { 
            padding: 12px 25px; 
            background: #007cba; 
            color: white; 
            border: none; 
            border-radius: 6px;
            cursor: pointer;
            margin: 8px;
            font-size: 16px;
            font-weight: bold;
        }
        .demo-button:hover { 
            background: #005a87; 
            transform: translateY(-1px);
        }
        .reset-button {
            background: #dc3545;
        }
        .reset-button:hover {
            background: #c82333;
        }
        .result { 
            margin: 20px 0; 
            padding: 20px; 
            border-radius: 8px;
            white-space: pre-wrap;
            font-size: 16px;
            line-height: 1.6;
        }
        .success { 
            background-color: #d4edda; 
            color: #155724; 
            border: 2px solid #c3e6cb;
        }
        .warning { 
            background-color: #fff3cd; 
            color: #856404; 
            border: 2px solid #ffeaa7;
        }
        .error { 
            background-color: #f8d7da; 
            color: #721c24; 
            border: 2px solid #f5c6cb;
        }
        .blocked { 
            background-color: #f5c6cb; 
            color: #721c24; 
            border: 3px solid #dc3545;
            font-weight: bold;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        .feature-list {
            background: #e8f5e8;
            border: 2px solid #28a745;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .feature-list li {
            margin: 10px 0;
            padding: 5px 0;
        }
        h1 {
            color: #007cba;
            text-align: center;
            margin-bottom: 30px;
        }
        h2 {
            color: #333;
            border-bottom: 2px solid #007cba;
            padding-bottom: 10px;
        }
        .stats {
            display: flex;
            justify-content: space-around;
            background: #f0f8ff;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .stat-item {
            text-align: center;
        }
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #007cba;
        }
        .quick-tests {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
        }
        .quick-test-btn {
            padding: 8px 15px;
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        .quick-test-btn:hover {
            background: #545b62;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ›¡ï¸ ××¢×¨×›×ª ××•×“×¨×¦×™×” ×¢×‘×¨×™×ª ××ª×§×“××ª</h1>
        
        <div class="feature-list">
            <h2>âœ¨ ×ª×›×•× ×•×ª ×”××¢×¨×›×ª</h2>
            <ul>
                <li>ğŸŒ <strong>×ª××™×›×” ×“×•-×œ×©×•× ×™×ª ××œ××”</strong> - ×¢×‘×¨×™×ª ×•×× ×’×œ×™×ª</li>
                <li>ğŸ” <strong>×–×™×”×•×™ ××•×˜×•××˜×™ ×©×œ ×©×¤×”</strong> - ×”×•×“×¢×•×ª ×‘×©×¤×” ×”××ª××™××”</li>
                <li>ğŸ“š <strong>×××’×¨ ××™×œ×™× ××§×™×£</strong> - 350+ ××™×œ×™× ×‘×œ×ª×™ ×”×•×œ××•×ª</li>
                <li>ğŸ¯ <strong>×“×¤×•×¡×™× ×ª×¨×‘×•×ª×™×™× ×¢×‘×¨×™×™×</strong> - ×–×™×”×•×™ ×‘×™×˜×•×™×™× ×œ× ×”×•×œ××™×</li>
                <li>âš ï¸ <strong>××¢×¨×›×ª 3 ××–×”×¨×•×ª</strong> - ×”×–×“×× ×•×™×•×ª ×œ×ª×™×§×•×Ÿ</li>
                <li>ğŸ”’ <strong>×—×¡×™××” ×–×× ×™×ª</strong> - ×”×’× ×” ×¢×œ ×”××©×ª××©×™×</li>
                <li>ğŸ”„ <strong>××™×¤×•×¡ ××•×˜×•××˜×™</strong> - ×—×–×¨×” ×œ×©×™××•×© ×ª×§×™×Ÿ</li>
            </ul>
        </div>

        <div class="stats">
            <div class="stat-item">
                <div class="stat-number" id="warningCount">0</div>
                <div>××–×”×¨×•×ª × ×•×›×—×™×•×ª</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="testCount">0</div>
                <div>×‘×“×™×§×•×ª ×©×‘×•×¦×¢×•</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="blockedStatus">×œ×</div>
                <div>×¡×˜×˜×•×¡ ×—×¡×™××”</div>
            </div>
        </div>

        <div class="demo-section">
            <h2>ğŸ§ª ×‘×“×™×§×” ××™× ×˜×¨××§×˜×™×‘×™×ª</h2>
            <p>×”×›× ×¡ ×˜×§×¡×˜ ×œ×‘×“×™×§×” ×•×”××¢×¨×›×ª ×ª×‘×“×•×§ ××•×ª×• ×¢×‘×•×¨ ×ª×•×›×Ÿ ×œ× ×”×•×œ×:</p>
            
            <input type="text" id="testInput" class="demo-input" placeholder="×”×›× ×¡ ×˜×§×¡×˜ ×œ×‘×“×™×§×” (×œ×“×•×’××”: ×—×œ×‘, ×œ×—×, ×ª×¤×•×—×™×)">
            
            <div>
                <button onclick="testInput()" class="demo-button">ğŸ” ×‘×“×•×§ ×˜×§×¡×˜</button>
                <button onclick="resetSystem()" class="demo-button reset-button">ğŸ”„ ××™×¤×•×¡ ××¢×¨×›×ª</button>
            </div>

            <div class="quick-tests">
                <button onclick="quickTest('×—×œ×‘, ×œ×—×, ×ª×¤×•×—×™×')" class="quick-test-btn">âœ… ×˜×§×¡×˜ × ×§×™</button>
                <button onclick="quickTest('milk bread apples')" class="quick-test-btn">âœ… ×× ×’×œ×™×ª × ×§×™×”</button>
                <button onclick="quickTest('×—×œ×‘ milk ×œ×—× bread')" class="quick-test-btn">ğŸŒ ××¢×•×¨×‘ × ×§×™</button>
                <button onclick="quickTest('×–×™×Ÿ')" class="quick-test-btn">âŒ ×¢×‘×¨×™ ×œ× ×”×•×œ×</button>
                <button onclick="quickTest('fuck')" class="quick-test-btn">âŒ ×× ×’×œ×™ ×œ× ×”×•×œ×</button>
                <button onclick="quickTest('×›×•×¡ ××× ×©×œ×š')" class="quick-test-btn">ğŸ­ ×“×¤×•×¡ ×ª×¨×‘×•×ª×™</button>
            </div>
            
            <div id="testResult" class="result" style="display: none;"></div>
        </div>

        <div class="demo-section">
            <h2>ğŸ“Š ×”×“×’××ª ××¢×¨×›×ª ×”××–×”×¨×•×ª</h2>
            <p>×”××¢×¨×›×ª ××¡×¤×§×ª 3 ×”×–×“×× ×•×™×•×ª ×œ×¤× ×™ ×—×¡×™××” ×–×× ×™×ª:</p>
            
            <button onclick="demonstrateWarningSystem()" class="demo-button">ğŸš¨ ×”×“×’××ª ××¢×¨×›×ª ××–×”×¨×•×ª</button>
            
            <div id="warningDemo" class="result" style="display: none;"></div>
        </div>

        <div class="demo-section">
            <h2>ğŸ”¬ ××‘×—× ×™ ×™×¡×•×“</h2>
            <p>×‘×“×™×§×•×ª ××•×˜×•××˜×™×•×ª ×œ××¢×¨×›×ª:</p>
            
            <button onclick="runComprehensiveTests()" class="demo-button">ğŸ§ª ×”×¨×¦×ª ×›×œ ×”×‘×“×™×§×•×ª</button>
            
            <div id="comprehensiveResults" class="result" style="display: none;"></div>
        </div>
    </div>

    <script>
        // Import moderation system (simplified version for demo)
        let moderator;
        let testCounter = 0;

        class UserModerationTracker {
            constructor() {
                this.warningCount = parseInt(localStorage.getItem('demo_moderation_warnings') || '0');
                this.isBlocked = localStorage.getItem('demo_moderation_blocked') === 'true';
            }
            
            addWarning() {
                this.warningCount++;
                localStorage.setItem('demo_moderation_warnings', this.warningCount.toString());
                if (this.warningCount >= 3) {
                    this.blockUser();
                }
                updateStats();
            }
            
            blockUser() {
                this.isBlocked = true;
                localStorage.setItem('demo_moderation_blocked', 'true');
                updateStats();
            }
            
            reset() {
                this.warningCount = 0;
                this.isBlocked = false;
                localStorage.removeItem('demo_moderation_warnings');
                localStorage.removeItem('demo_moderation_blocked');
                updateStats();
            }
        }

        class HebrewModerationDemo {
            constructor() {
                this.hebrewWords = ['×–×™×Ÿ', '×–×•× ×”', '×›×•×¡', '×—×¨×', '×©×¨××•×˜×”', '×‘×Ÿ ×–×•× ×”', '×‘×ª ×–×•× ×”'];
                this.englishWords = ['fuck', 'shit', 'damn', 'bitch', 'bastard'];
                this.culturalPatterns = [/×›×•×¡.*×××/i, /×–×™×™×Ÿ.*××•×ª×š/i, /××–×“×™×™×Ÿ.*×œ×š/i];
                this.tracker = new UserModerationTracker();
            }
            
            containsHebrew(text) {
                return /[\u0590-\u05FF]/.test(text);
            }
            
            detectToxic(text) {
                const detectedWords = [];
                const lower = text.toLowerCase();
                
                // Check Hebrew
                for (const word of this.hebrewWords) {
                    if (text.includes(word)) {
                        detectedWords.push(word);
                    }
                }
                
                // Check English
                for (const word of this.englishWords) {
                    if (lower.includes(word)) {
                        detectedWords.push(word);
                    }
                }
                
                // Check cultural patterns
                for (const pattern of this.culturalPatterns) {
                    if (pattern.test(text)) {
                        detectedWords.push('×“×¤×•×¡ ×ª×¨×‘×•×ª×™');
                        break;
                    }
                }
                
                return detectedWords;
            }
            
            validate(text) {
                if (this.tracker.isBlocked) {
                    const hasHebrew = this.containsHebrew(text);
                    return {
                        isValid: false,
                        isBlocked: true,
                        message: hasHebrew ? 
                            'ğŸ”’ ×”×’×™×©×” ×—×¡×•××” ×–×× ×™×ª. ×× × ×¨×¢× ×Ÿ ××ª ×”×“×£ ×›×“×™ ×œ××¤×¡ ×•×”×©×ª××© ×‘×©×¤×” ×”×•×œ××ª ×‘×œ×‘×“.' :
                            'ğŸ”’ Access temporarily blocked. Please refresh the page to reset and use appropriate language only.',
                        warningCount: this.tracker.warningCount
                    };
                }
                
                const detectedWords = this.detectToxic(text);
                
                if (detectedWords.length > 0) {
                    this.tracker.addWarning();
                    const hasHebrewWords = detectedWords.some(word => this.containsHebrew(word)) || detectedWords.includes('×“×¤×•×¡ ×ª×¨×‘×•×ª×™');
                    
                    let message;
                    if (hasHebrewWords) {
                        const messages = [
                            'ğŸš¨ ××–×”×¨×” 1/3: ×–×•×”×ª×” ×©×¤×” ×œ× ×”×•×œ××ª. ×× × ×©××•×¨ ×¢×œ ×¨×©×™××•×ª ×™×“×™×“×•×ª×™×•×ª ×œ××©×¤×—×” ×•×ª×§×Ÿ ××ª ×”×˜×§×¡×˜.',
                            'ğŸš¨ ××–×”×¨×” 2/3: ×”×¤×¨×” ×©× ×™×™×” ×–×•×”×ª×”. ×× × ×”×©×ª××© ×‘×©×¤×” ×”×•×œ××ª ×‘×œ×‘×“. ×”×¤×¨×” × ×•×¡×¤×ª ×ª×—×¡×•× ×–×× ×™×ª ××ª ×”×’×™×©×” ×©×œ×š.',
                            'ğŸš¨ ××–×”×¨×” ××—×¨×•× ×” 3/3: ×–×” ×”×¡×™×›×•×™ ×”××—×¨×•×Ÿ ×©×œ×š. ×× × ×”×©×ª××© ×‘×©×¤×” ×”×•×œ××ª ×‘×œ×‘×“. ×”×¤×¨×” ×”×‘××” ×ª×—×¡×•× ××ª ×”×’×™×©×” ×©×œ×š ×œ××¤×œ×™×§×¦×™×”.'
                        ];
                        message = messages[this.tracker.warningCount - 1] || messages[2];
                    } else {
                        const messages = [
                            'ğŸš¨ Warning 1/3: Inappropriate language detected. Please keep your lists family-friendly and revise your text.',
                            'ğŸš¨ Warning 2/3: Second violation detected. Please use appropriate language only. One more violation will temporarily block your access.',
                            'ğŸš¨ Final Warning 3/3: This is your last chance. Please use appropriate language only. Next violation will block your access to the app.'
                        ];
                        message = messages[this.tracker.warningCount - 1] || messages[2];
                    }
                    
                    return {
                        isValid: false,
                        isBlocked: this.tracker.isBlocked,
                        warningCount: this.tracker.warningCount,
                        detectedWords,
                        message: message + `\\n\\n××™×œ×™× ×©×–×•×”×•: "${detectedWords.join('", "')}"`
                    };
                }
                
                return { isValid: true };
            }
            
            reset() {
                this.tracker.reset();
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            moderator = new HebrewModerationDemo();
            updateStats();
        });

        function updateStats() {
            document.getElementById('warningCount').textContent = moderator.tracker.warningCount;
            document.getElementById('testCount').textContent = testCounter;
            document.getElementById('blockedStatus').textContent = moderator.tracker.isBlocked ? '×›×Ÿ' : '×œ×';
        }

        function testInput() {
            const input = document.getElementById('testInput').value.trim();
            if (!input) {
                alert('×× × ×”×›× ×¡ ×˜×§×¡×˜ ×œ×‘×“×™×§×”');
                return;
            }
            
            quickTest(input);
        }

        function quickTest(text) {
            testCounter++;
            document.getElementById('testInput').value = text;
            
            const result = moderator.validate(text);
            displayResult(result, text);
            updateStats();
        }

        function displayResult(result, text) {
            const resultDiv = document.getElementById('testResult');
            
            let className = result.isValid ? 'success' : (result.isBlocked ? 'blocked' : 'warning');
            let icon = result.isValid ? 'âœ…' : (result.isBlocked ? 'ğŸ”’' : 'âš ï¸');
            let status = result.isValid ? '×ª×•×›×Ÿ ×××•×©×¨' : 
                        result.isBlocked ? '×—×¡×•× - ×’×™×©×” ××•×’×‘×œ×ª' : 
                        `××–×”×¨×” ${result.warningCount}/3`;
            
            resultDiv.innerHTML = `
                <div style="font-size: 20px; font-weight: bold; margin-bottom: 15px;">
                    ${icon} ${status}
                </div>
                <div style="margin-bottom: 10px;">
                    <strong>×”×˜×§×¡×˜ ×©× ×‘×“×§:</strong> "${text}"
                </div>
                ${result.message ? `
                <div style="margin-bottom: 10px;">
                    <strong>×”×•×“×¢×ª ×”××¢×¨×›×ª:</strong><br>
                    ${result.message.replace(/\\n/g, '<br>')}
                </div>
                ` : ''}
                ${result.detectedWords && result.detectedWords.length ? `
                <div style="margin-bottom: 10px;">
                    <strong>××™×œ×™×/×“×¤×•×¡×™× ×©×–×•×”×•:</strong> ${result.detectedWords.join(', ')}
                </div>
                ` : ''}
                <div style="font-size: 14px; color: #666; margin-top: 15px;">
                    ××¡×¤×¨ ×‘×“×™×§×”: ${testCounter} | 
                    ××–×”×¨×•×ª × ×•×›×—×™×•×ª: ${result.warningCount || 0}/3 |
                    ×¡×˜×˜×•×¡: ${result.isBlocked ? '×—×¡×•×' : '×¤×¢×™×œ'}
                </div>
            `;
            
            resultDiv.className = `result ${className}`;
            resultDiv.style.display = 'block';
        }

        function resetSystem() {
            moderator.reset();
            document.getElementById('testInput').value = '';
            document.getElementById('testResult').style.display = 'none';
            updateStats();
            
            alert('ğŸ”„ ×”××¢×¨×›×ª ××•×¤×¡×” ×‘×”×¦×œ×—×”! ×›×œ ×”××–×”×¨×•×ª ×•×”×—×¡×™××•×ª × ×•×§×•.');
        }

        function demonstrateWarningSystem() {
            moderator.reset();
            
            let results = [];
            
            // Warning 1
            results.push({ text: '×–×™×Ÿ', step: '××–×”×¨×” ×¨××©×•× ×”', result: moderator.validate('×–×™×Ÿ') });
            
            // Warning 2  
            results.push({ text: '×—×¨×', step: '××–×”×¨×” ×©× ×™×™×”', result: moderator.validate('×—×¨×') });
            
            // Warning 3 + Block
            results.push({ text: '×›×•×¡', step: '××–×”×¨×” ×©×œ×™×©×™×ª + ×—×¡×™××”', result: moderator.validate('×›×•×¡') });
            
            // Blocked attempt
            results.push({ text: '×ª×¤×•×—', step: '× ×™×¡×™×•×Ÿ ×›×©×—×¡×•×', result: moderator.validate('×ª×¤×•×—') });
            
            const html = results.map((test, index) => `
                <div style="margin: 15px 0; padding: 15px; border-left: 4px solid ${
                    test.result.isValid ? '#28a745' : (test.result.isBlocked ? '#dc3545' : '#ffc107')
                }; background: ${
                    test.result.isValid ? '#d4edda' : (test.result.isBlocked ? '#f8d7da' : '#fff3cd')
                };">
                    <strong>×©×œ×‘ ${index + 1}: ${test.step}</strong><br>
                    <em>×˜×§×¡×˜ × ×‘×“×§:</em> "${test.text}"<br>
                    <em>×ª×•×¦××”:</em> ${test.result.isBlocked ? 'ğŸ”’ ×—×¡×•×' : (test.result.isValid ? 'âœ… ×××•×©×¨' : `âš ï¸ ××–×”×¨×” ${test.result.warningCount}/3`)}<br>
                    ${test.result.message ? `<em>×”×•×“×¢×”:</em> ${test.result.message.split('\\n')[0]}<br>` : ''}
                </div>
            `).join('');
            
            document.getElementById('warningDemo').innerHTML = html;
            document.getElementById('warningDemo').style.display = 'block';
            
            updateStats();
        }

        function runComprehensiveTests() {
            moderator.reset();
            
            const tests = [
                { text: '×—×œ×‘, ×œ×—×, ×ª×¤×•×—×™×', expected: 'success', description: '×¨×©×™××ª ×§× ×™×•×ª ×¢×‘×¨×™×ª × ×§×™×”' },
                { text: 'milk, bread, apples', expected: 'success', description: '×¨×©×™××ª ×§× ×™×•×ª ×× ×’×œ×™×ª × ×§×™×”' },
                { text: '×—×œ×‘ milk ×œ×—× bread', expected: 'success', description: '×ª×•×›×Ÿ ××¢×•×¨×‘ ×¢×‘×¨×™×ª-×× ×’×œ×™×ª' },
                { text: '×–×™×Ÿ', expected: 'warning', description: '× ×™×‘×•×œ ×¤×” ×¢×‘×¨×™' },
                { text: 'fuck', expected: 'warning', description: '× ×™×‘×•×œ ×¤×” ×× ×’×œ×™' },
                { text: '×›×•×¡ ××× ×©×œ×š', expected: 'warning', description: '×“×¤×•×¡ ×ª×¨×‘×•×ª×™ ×¢×‘×¨×™' },
                { text: '×©×¨××•×˜×”', expected: 'warning', description: '××™×œ×” ×œ× ×”×•×œ××ª ×¢×‘×¨×™×ª' },
                { text: 'shit damn', expected: 'warning', description: '××™×œ×™× ×œ× ×”×•×œ××•×ª ×× ×’×œ×™×•×ª' }
            ];
            
            const results = tests.map(test => {
                const result = moderator.validate(test.text);
                return {
                    ...test,
                    result,
                    success: (test.expected === 'success' && result.isValid) || 
                            (test.expected === 'warning' && !result.isValid)
                };
            });
            
            const successCount = results.filter(r => r.success).length;
            const totalCount = results.length;
            
            const html = `
                <div style="text-align: center; font-size: 20px; font-weight: bold; margin-bottom: 20px; color: ${successCount === totalCount ? '#28a745' : '#dc3545'};">
                    ğŸ§ª ×ª×•×¦××•×ª ×”×‘×“×™×§×”: ${successCount}/${totalCount} ×¢×‘×¨×• ×‘×”×¦×œ×—×”
                </div>
                ${results.map(test => `
                    <div style="margin: 10px 0; padding: 12px; border-left: 4px solid ${test.success ? '#28a745' : '#dc3545'}; background: ${test.success ? '#d4edda' : '#f8d7da'};">
                        <strong>${test.success ? 'âœ…' : 'âŒ'} ${test.description}</strong><br>
                        <em>×˜×§×¡×˜:</em> "${test.text}"<br>
                        <em>××¦×•×¤×”:</em> ${test.expected === 'success' ? '×××•×©×¨' : '××–×”×¨×”'} | 
                        <em>×ª×•×¦××”:</em> ${test.result.isValid ? '×××•×©×¨' : '××–×”×¨×”'}<br>
                        ${test.result.detectedWords && test.result.detectedWords.length ? `<em>×–×•×”×•:</em> ${test.result.detectedWords.join(', ')}<br>` : ''}
                    </div>
                `).join('')}
            `;
            
            document.getElementById('comprehensiveResults').innerHTML = html;
            document.getElementById('comprehensiveResults').style.display = 'block';
            
            testCounter += tests.length;
            updateStats();
        }
    </script>
</body>
</html>